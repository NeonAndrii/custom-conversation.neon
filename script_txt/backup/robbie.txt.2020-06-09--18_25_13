Script: "Robbie" 
Language: "en-us male"
Variable: {userName}: ""
Variable: {more}: ""
Variable: {symptoms}: ""
Variable: {True}: 1
Variable: {False}: 0

@StartCovidScreening

#GREETING

Name Speak : Robbie : "Thank you for interacting with the Neon virtual COVID-19 screening beta test."
Name Speak : Robbie : "My name is Neon Robbie. What is your name?"
voice_input{userName}
Name Speak : Robbie : "Hi {userName}"
Name Speak : Robbie : "Your beta test virtual exam room is ready."
Name Speak : Robbie : "In response to screening questions you can say details to hear more details."
Name Speak : Robbie : "or you can say previous question, or start over."

@promptUserRef
Name Speak : Robbie : "Are you asking for help for yourself or asking on behalf of someone else?"
voice_input{covidUserRef}
if {covidUserRef} == "myself":
    userref1 = "Have you"
    userref2 = "Are you"
    userref3 = "Do you"
else:
    if {covidUserRef} != "someone else":
        Goto: promptUserRef
    else
        userref1 = "Has the person you are calling about"
        userref2 = "Is the person for whom you are calling"
        userref3 = "Does the person you are calling about"

Name Speak : Robbie : "got it"

#TRIAGE

@promptIll
Name Speak : Robbie : "{userref2} ill?"   
# "Are you ill or contacting on behalf of someone who is ill?" 
voice_input{covidIll}
if {covidIll} == "no":
    Goto: A 
    # Exit - Only for sick people
else:
    if {covidIll} == "yes":
        Goto: promptAge
    else:
        if {covidIll} == "start over":
            Goto: StartCovidScreening
        else:
            Goto: promptIll

@promptAge
Name Speak : Robbie : "How many years old {userref2} ? "
voice_input{covidAge}
if {covidAge} < 3:
    Goto: C 
    # Exit - Not for children
else:
    if {covidAge} >= 3:
        Goto: promptLifeThreatening
    else:
        Goto: promptAge

# Life Threatening

@promptLifeThreatening
Name Speak : Robbie : "{userref3} have a life-threatening emergency medical condition? Say details for details."
voice_input{covidLifeThreat}
if {covidLifeThreat} == "no":
    Goto: promptContact  
else:
    if {covidLifeThreat} == "details":
        Name Speak : Robbie : "Life-threatening emergency medical conditions include these symptoms: Extremely difficult breathing (can't talk without gasping for air); Blue-colored lips or face; Severe, constant dizziness or lightheadedness; Acting confused or inability to arouse; Slurred speech (new or worsening); New onset of seizures or seizures that won't stop; and Other life-threatening emergency signs."
        Goto: promptLifeThreatening
    if {covidLifeThreat} != "yes":
            Goto: promptLifeThreatening
    goto B

# SCREEN FOR SYMPTOMS

@promptContact
Name Speak : Robbie : "In the two weeks leading up to feeling sick {userref1} had contact with someone who was diagnosed with COVID-19, or live in or recently visited a place where COVID-19 is spreading?"
voice_input{covidContact}
if {covidContact} == "no":
    covidContact = {False}  
else:
    if {covidContact} != "yes":
        Goto: promptContact
    covidContact = {True} 

# SYMPTOMS 

@promptFever
Name Speak : Robbie : "{userref3} have a fever or felt hot or feverish in the last two days?"
voice_input{covidFever}
if {covidFever} == "no":
    covidFever = {False}  
else:
    if {covidFever} != "yes":
        Goto: promptFever
    covidFever = {True}  
    # Add - 
    # Ask "Were you able to measure the temperature with a thermometer?"
    # Yes: Ask "What was the temperature and when was it measured?"
    # If No: Ask "Are you/they experiencing shaking, chills, or sweating? Do you/they feel very warm to the touch?"
# Ask "When did the fever/feverishness start?"
# Ask "Was fever-reducing medication given?"
# Details: Examples of fever-reducing medications include ibuprofen and acetaminophen.
# If Yes: Ask "How long ago was the medication taken?"
 
@promptBreath
Name Speak : Robbie : "{userref3} have any shortness of breath?"
voice_input{covidBreath}
if {covidBreath} == "no":
    covidBreath = {False}  
else:
    if {covidBreath} != "yes":
        Goto: promptBreath
    covidBreath = {True}  

@promptCough
Name Speak : Robbie : "{userref3} have a cough?"
voice_input{covidCough}
if {covidCough} == "no":
    covidCough = {False}  
else:
    if {covidCough} != "yes":
        Goto: promptCough
    covidCough = {True}  

@promptBP
Name Speak : Robbie : "{userref3} have low blood pressure? Signs of low blood pressure can include cold, pale, or clammy skin; or feeling so light-headed and so weak that you/they are not able to stand."
voice_input{covidBP}
if {covidBP} == "no":
    covidBP = {False}  
else:
    if {covidBP} != "yes":
        Goto: promptBP
    covidBP = {True}  

@promptNose
Name Speak : Robbie : "{userref3} have a runny or stuffed nose?"
voice_input{covidNose}
if {covidNose} == "no":
    covidNose = {False}  
else:
    if {covidNose} != "yes":
        Goto: promptNose
    covidNose = {True}  

@promptThroat
Name Speak : Robbie : "{userref3} have a sore throat?"
voice_input{covidThroat}
if {covidThroat} == "no":
    covidThroat = {False}  
else:
    if {covidThroat} != "yes":
        Goto: promptThroat
    covidThroat = {True}  

@promptMuscle
Name Speak : Robbie : "{userref3} have muscle aches or pains?"
voice_input{covidMuscle}
if {covidMuscle} == "no":
    covidMuscle = {False}  
else:
    if {covidMuscle} != "yes":
        Goto: promptMuscle
    covidMuscle = {True}  

@promptTaste
Name Speak : Robbie : "{userref3} have a new loss of taste or smell?"
voice_input{covidTaste}
if {covidTaste} == "no":
    covidTaste = {False}  
else:
    if {covidTaste} != "yes":
        Goto: promptTaste
    covidTaste = {True}  

@promptFatigue
Name Speak : Robbie : "{userref3} have fatigue or malaise?"
voice_input{covidFatigue}
if {covidFatigue} == "no":
    covidFatigue = {False}  
else:
    if {covidFatigue} != "yes":
        Goto: promptFatigue
    covidFatigue = {True}  

@promptNausea
Name Speak : Robbie : "{userref3} have nausea, vomiting, or diarrhea"
voice_input{covidNausea}
if {covidNausea} == "no":
    covidNausea = {False}  
else:
    if {covidNausea} != "yes":
        Goto: promptNausea
    covidNausea = {True}  

#HIGH RISK

@promptLungs
Name Speak : Robbie : "{userref3} have chronic lung diseases like asthma, chronic obstructive pulmonary disease [chronic bronchitis or emphysema], or other chronic conditions associated with impaired lung function or that require home oxygen?"
voice_input{covidLungs}
if {covidLungs} == "no":
    covidLungs = {False}  
else:
    if {covidLungs} != "yes":
        Goto: promptLungs
    covidLungs = {True}  

@promptHeart
Name Speak : Robbie : "{userref3} have Congestive heart failure?"
voice_input{covidHeart}
if {covidHeart} == "no":
    covidHeart = {False}  
else:
    if {covidHeart} != "yes":
        Goto: promptHeart
    covidHeart = {True}  

@promptDiabetes
Name Speak : Robbie : "{userref3} have Diabetes with complications?"
voice_input{covidDiabetes}
if {covidDiabetes} == "no":
    covidDiabetes = {False}  
else:
    if {covidDiabetes} != "yes":
        Goto: promptDiabetes
    covidDiabetes = {True}  

@promptNeuroCough
Name Speak : Robbie : "{userref3} have Neurological conditions that weaken ability to cough?"
voice_input{covidNeuroCough}
if {covidNeuroCough} == "no":
    covidNeuroCough = {False}  
else:
    if {covidNeuroCough} != "yes":
        Goto: promptNeuroCough
    covidNeuroCough = {True}  

@promptDialysis
Name Speak : Robbie : "{userref3} have Dialysis?"
voice_input{covidDialysis}
if {covidDialysis} == "no":
    covidDialysis = {False}  
else:
    if {covidDialysis} != "yes":
        Goto: promptDialysis
    covidDialysis = {True}  

@promptLiver
Name Speak : Robbie : "{userref3} have Cirrhosis of the liver?"
voice_input{covidLiver}
if {covidLiver} == "no":
    covidLiver = {False}  
else:
    if {covidLiver} != "yes":
        Goto: promptLiver
    covidLiver = {True}  

@promptObesity
Name Speak : Robbie : "{userref3} have Extreme obesity?"
voice_input{covidObesity}
if {covidObesity} == "no":
    covidObesity = {False}  
else:
    if {covidObesity} != "yes":
        Goto: promptObesity
    covidObesity = {True}  

@promptPregnancy
Name Speak : Robbie : "{userref3} have a current Pregnancy?"
voice_input{covidPregnancy}
if {covidPregnancy} == "no":
    covidPregnancy = {False}  
else:
    if {covidPregnancy} != "yes":
        Goto: promptPregnancy
    covidPregnancy = {True}  

@promptNursingHome
Name Speak : Robbie : "{userref3} live in a nursing home or other long-term care facility?"
voice_input{covidNursingHome}
if {covidNursingHome} == "no":
    covidNursingHome = {False}  
else:
    if {covidNursingHome} != "yes":
        Goto: promptNursingHome
    covidNursingHome = {True}  

# Comorbidities & Risks

Name Speak : Robbie : "Neon AI test - Calculating comorbidities"
Name Speak : Robbie : " {covidLungs} "
Name Speak : Robbie : " {covidHeart} "
Python: covidComorbidities = {covidLungs} + {covidHeart}
# + {covidDiabetes} + {neuroCough} + {covidDialysis} + {covidLiver} + {covidObesity} + {covidPregnancy}

Name Speak : Robbie : "Neon AI test - Checking for Dispositions"
if {covidBreath}:
    if {covidComorbidities} >= 1:
        goto B
    goto D
goto Z

# NO SYMPTOMS A
@A
Name Speak : Robbie : "The Neon AI triage service is intended for people who are ill or caring for someone who is ill. For general information about coronavirus disease 2019 (COVID-19), please refer to the Centers for Disease Control and Prevention (CDC) website. Do you have something to write with? The CDCs website is www.cdc.gov/COVID19."
Exit

#CALL 911 B
@B
Name Speak : Robbie : "Immediate medical attention is needed. You need to call 911 now. Tell the 911 operator if you have been in contact with someone with COVID-19 or if you have recently been to an area where COVID-19 is spreading."
Exit

#CHILD LESS THAN 2 YEARS OLD C
@C
Name Speak : Robbie : "This triage line is intended for children who are at least two years old and adults. If your child is younger than two years old and is sick, please contact their medical provider as soon as possible. If your child has had contact with a person who is sick with COVID-19 or has been in an area with community spread of COVID-19, please let their medical providers know."
Exit

#GO TO EMERGENCY DEPARTMENT D
@D
Name Speak : Robbie : "Urgent medical attention is needed. You need to go to your nearest emergency department. If you have had contact with a person who is sick with COVID-19 or you have been in an area with community spread of COVID-19, please let your medical providers know as soon as you arrive at the emergency department."
Exit

#CONTACT MEDICAL PROVIDER WITHIN 24 HOURS E
@E
Name Speak : Robbie : "You have some symptoms that may be related to COVID-19. Stay home except to get medical care. Separate yourself from others in your home. Wear a facemask, if possible.Clean your hands often.Avoid sharing personal household items.Clean all "high-touch" surfaces everyday. Monitor your symptoms  and seek prompt medical attention if your illness is worsening"
Exit

#CONTACT OCCUPATIONAL HEALTH PROVIDER AT WORK F
@F
Name Speak : Robbie : "Contact an occupational health provider in your healthcare facility as soon as possible. If you have cared for a person who is sick with COVID-19 or have been in an area with community spread of COVID-19, please let your occupational health provider know as soon as you speak with them."
Exit

#CONTACT HEALTHCARE PROVIDER IN LONG TERM CARE FACILITY G
@G
Name Speak : Robbie : "You may be at higher risk for severe illness since you live in a nursing home /long-term care facility. Tell a caregiver at the facility that you are sick and need to see a medical provider as soon as possible."
Exit

#STAY HOME AND TAKE CARE OF YOURSELF. CONTACT PROVIDER IF THINGS GET WORSE H
@H
Name Speak : Robbie : "Sorry you are feeling ill. You have one or more symptom(s) that may be related to COVID-19. Stay home and take care of yourself. Please follow steps to prevent others in your household or community from getting sick."
Exit

# Not Done Yet  H
@Z
Name Speak : Robbie : "I'm sorry {userName} I'm not programmed for that answer yet. I'm sorry you are feeling ill. You have one or more symptom(s) that may be related to COVID-19. Stay home and take care of yourself. Please follow steps to prevent others in your household or community from getting sick."
Exit