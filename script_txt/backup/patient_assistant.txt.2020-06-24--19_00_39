Script: "Patient Assistant"

# Start up
## Announce available version

"Name Speak : Patty : "</speak>Version 20200624 18:33 Neon Patient Assistant Application"

## Initialize

Variable: {exitList} = "exit", "cancel", "never mind"
Variable: {noList} = "no", "not now", "never mind", "nope", "n" 
Variable: {yesList} =  "yes", "yup", "y"
Variable: {alertsPhraseList} =  "help", "I need help", "help me", "emergency", "this is an emergency", "I need a doctor", "I need a doctor", "I need a doctor", "I need a doctor", "I need a doctor", "I need a nurse", "I need aid", "I need a caregiver", "I need assistance", "I fell", "I can't get up"
Variable: {heyPattyList} = "hey Patty", "Patty are you there"
Variable: {askPrompt} = ""
Variable: {returnLabel} = "" 
Variable: {askInput} = ""

## Ask to install assistant
returnLabel = InstallAssistant
askPrompt = "Hi, I'm Patty, a demonstration patient assistant from Neon AI. Thank you for helping test this new conversational application. Say your name, or cancel."
Goto : ASK

@InstallAssistant

userName = askInput

Name Speak : Patty : "Hi {userName}. I am glad you chose to install the Neon Patient Assistance Application."

## Offer additional information

Name Speak : Patty : "Before starting the Patient Assistant, would you like more information on the Neon conversational patient assistance application?"
voice_input{moreAppInfo}
if {moreAppInfo} IN {noList[*]}:
    Goto: BeginAssistant
Name Speak : Patty : "The Neon conversational demonstration patient assistant provides an automated assistant that listens for calls for help and sends alerts to the patient care administrator.  here are some examples of things users can say to .. and more someday .. like: .. Patty play Bach .. or Patty turn the lights off or Patty send a text to 123-456-7890 .. or Patty I want to change your name to Freddie .."

@BeginAssistant

Name Speak : Patty : "Your demonstration patient assistant is now signing in. You can say, hey Patty, or, Patty are you there, if you want to know if I am listening."

# Wait for alert

@WaitForAlertPhrase

askPrompt = ""
returnLabel = GotPatientPhrase
Goto : ASK

@GotPatientPhrase
userSaid = askInput
## Did patient ask for "help" 
if {userSaid} !IN {alertsPhraseList[*]}:
    Goto: WaitForAlertPhrase

Reconvey : askInput

askPrompt = "Say just kidding if this is not an emergency"
returnLabel = ConfirmHelp
Goto : ASK
@ConfirmHelp
userSaid = askInput
## Did patient ask for "help" 
if {userSaid} == "just kidding"
    Goto: WaitForAlertPhrase

Name Speak : Patty : "Patty the Patient Assistant would now send an emergency alert .. and keep engaged with the patient and sending follow up alerts."
Name Speak : Patty : "Patty the Patient Assistant test completed. Say start again to start again?"
Name Speak : Patty : "In progress exiting"
exit

## Take a photo
## Play back to the patient what they said ("You said .." is that correct?)
## LATER: Light up Patient Assistant Device, and turn on patient room door sign
## Ask if assistance is NOT needed, provide cancel option
## Send alert #1-PatientAssistanceRequest to nursing/caregiving administration with stt, recording and photo
## Tell patient their caregiver has been alerted, provide cancel option
## LATER: Enable interactive administrator to respond with automated and/or custom reply, with stt .. and deactivate
# Ask for details
## Do you have a life threatening emergency?
## If yes then sound alarm and send alert #2-Emergency
## Do you have bleeding .. problems breathing .. weakness .. fever .. coughing .. pulse slow or racing .. 
## Send alert #3
## Play back to the patient what they said ("You said .." is that correct?)
## LATER: Keep talking, recoding, sending alerts
## I hope you can talk to me. What's your name? Tell me a few word about your situation
## LATER: Enable administrator to take snapshots, turn on audio, video, 

# ========== Subroutines

@ASK
if {askPrompt} != ""
    Name Speak : Patty : "{askPrompt}"
voice_input{askInput}
if {askInput} IN exitList
    Name Speak : Patty : "Say yes to confirm exiting Patty, the Neon AI Patient Assistant"
    voice_input{askInput}
    if {askInput} IN yesList
        Name Speak : Patty : "Patty, the Neon AI Patient Assistant, signing off"
        exit
    else
        goto : ASK
if {askInput} IN heyPattyList
    Name Speak : Patty : "Patty, the Neon AI Patient Assistant, is listening"
    goto : ASK
Goto: {returnLabel}